<head>
    <title>Socket.io Boilerplate</title>
</head>

<body>
    <form id="frm1" action="" onkeydown="return event.key != 'Enter';">
        Room Name: <input id="nameField" type="text" name="roomName" value=""><br>
    </form>
    <button id="btn">Create Room</button>

    <div id="roomCodeDisplay"></div>
    <div id="foo">Server Status: ðŸ”´</div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js" integrity="sha384-fKnu0iswBIqkjxrhQCTZ7qlLHOFEgNkRmK2vaO/LbTZSXdJfAu6ewRBdwHPhBo/H" crossorigin="anonymous"></script>
<script>
    const log = console.log.bind(console);
    var socket;
    try {
        socket = io('http://86.2.10.33:3221/');
    } catch (err) {};
    log("%cSocket.io Boilerplate", "color:blue; font-size:50px");

    // Func to generate roomCode
    var makeRoomId = (len) => {
        var result = '';
        var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
        var charactersLength = characters.length;
        for ( var i=0; i<len; i++ ) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
        };
        document.getElementById('roomCodeDisplay').innerHTML = result;
        return result;
    };

    socket.on('connect', () => {
        document.getElementById('foo').innerHTML = 'Server Status: âœ…';
    });
    socket.on('disconnect', () => {
        document.getElementById('foo').innerHTML = 'Server Status: ðŸ”´';
    });

    document.getElementById('btn').addEventListener('click', () => {
        var roomName = document.getElementById('nameField').value;
        var room = {
            roomName: roomName, id: makeRoomId(6)
        };
        var user = {
            userType: 'teacher'
        };
        socket.emit('roomListener', {room, user});
    });
</script>
